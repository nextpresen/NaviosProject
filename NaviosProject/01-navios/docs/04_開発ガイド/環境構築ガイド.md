# Navios 環境構築ガイド

最終更新: 2026-02-16

このガイドでは、Naviosの開発環境を構築する手順を、初心者にも分かりやすく説明します。

## 前提条件

開発を始める前に、以下のソフトウェアをインストールしてください。

### 必須ソフトウェア

1. **Node.js** (バージョン 18以上)
   - JavaScriptを実行するための環境
   - ダウンロード: https://nodejs.org/

2. **Git**
   - プログラムのバージョン管理ツール
   - ダウンロード: https://git-scm.com/

3. **テキストエディタ（推奨: VS Code）**
   - コードを編集するためのソフト
   - ダウンロード: https://code.visualstudio.com/

## セットアップ手順

### 1. プロジェクトの取得

プロジェクトフォルダに移動します。

```bash
cd /home/zer0/ドキュメント/NaviosProject/01-navios/navios
```

### 2. 依存パッケージのインストール

プロジェクトに必要なライブラリ（道具）をインストールします。

```bash
npm install
```

**注意**: この処理には数分かかる場合があります。

### 3. データベースのセットアップ

データベースを初期化します。

```bash
# Prismaの設定を生成
npm run prisma:generate

# データベースのマイグレーション（テーブル作成）
npm run prisma:migrate

# サンプルデータの投入
npm run prisma:seed
```

### 4. 環境変数の設定

`.env.local` ファイルを作成し、以下の内容を設定します。

```env
# データベース接続
DATABASE_URL="file:/tmp/navios-dev.db"

# NextAuth設定
NEXTAUTH_SECRET="your-secret-key-here"
NEXTAUTH_URL="http://localhost:3000"

# サイトURL
NEXT_PUBLIC_SITE_URL="http://localhost:3000"

# 地図プロバイダー（デフォルト: leaflet）
NEXT_PUBLIC_MAP_PROVIDER="leaflet"
```

**重要**: `NEXTAUTH_SECRET` は、以下のコマンドで生成できます。

```bash
openssl rand -base64 32
```

### 5. 開発サーバーの起動

開発サーバーを起動します。

```bash
npm run dev
```

ブラウザで `http://localhost:3000` を開くと、Naviosアプリが表示されます。

## よく使うコマンド

開発中によく使うコマンドの一覧です。

### 開発サーバー

```bash
# 開発サーバー起動（ファイル変更を自動検知）
npm run dev
```

### ビルドとテスト

```bash
# コードの構文チェック
npm run lint

# 本番用ビルド
npm run build

# テスト実行
npm run test
```

### データベース操作

```bash
# Prismaスタジオ起動（データベースをGUIで確認）
npx prisma studio

# データベースリセット（全データ削除 → マイグレーション → シード）
npm run prisma:reset

# シードデータのみ再投入
npm run prisma:seed
```

### クリーンアップ

```bash
# ビルド成果物の削除
rm -rf .next

# 完全クリーン（node_modulesも削除）
rm -rf node_modules .next
npm install
```

## トラブルシューティング

### ポート3000が既に使用されている

```bash
# プロセスを確認
lsof -i :3000

# プロセスを終了
kill -9 <PID>
```

### データベース接続エラー

1. `DATABASE_URL` が正しいか確認
2. Prismaの再生成を試す

```bash
npm run prisma:generate
npm run prisma:migrate
```

### モジュールが見つからないエラー

```bash
# node_modulesを削除して再インストール
rm -rf node_modules
npm install
```

## 次のステップ

開発環境が整ったら、[コーディング規約.md] や [02_設計書/Phase1設計書.md] を読んで、プロジェクトの構造を理解しましょう。

## サポート

問題が解決しない場合は、プロジェクトチームに相談してください。
